<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Manage Categories</title>
    <%- include('../.././partials/admin-css-links') -%>
  </head>
  <body>
    <nav class="navbar is-dark">
      <div class="navbar-brand">
        <b class="navbar-item">Agarbatti</b>
        <a role="button" class="navbar-burger" id="navburger" aria-label="menu" aria-expanded="false" data-target="hammenu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navmenu">
        <div class="navbar-end">
          <p class="navbar-item">Welcome username</p>
          <a href="#" class="navbar-item">Logout</a>
        </div>
      </div>
    </nav>
    <main>
      <div id="parentcontainer" data-id="manage-categories">
        <%- include('../.././partials/admin-sidemenu') -%>
        <div id="main_content">
          <div class="modal" id="createmodal">
            <div class="modal-background close_modal">

            </div>
            <div class="modal-content">
              <div class="box">
                <p class="title has-text-weight-light has-text-centered">Create New Category</p>
                <form class="" action="/admin/categories/create" method="post">
                  <div class="field">
                    <label class="label">Name</label>
                    <div class="control">
                      <input type="text" required class="input" name="name" placeholder="Enter Category Name">
                    </div>
                  </div>
                  <div class="field is-grouped">
                    <div class="control">
                      <button type="submit" class="button is-primary">Submit</button>
                    </div>
                    <div class="control">
                      <button type="button" class="button is-light close_modal">Close</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="modal" id="deletemodal">
            <div class="modal-background close_modal">

            </div>
            <div class="modal-content">
              <div class="box has-text-centered">
                <p class="has-text-danger"><span class="icon is-large"><i class="fas fa-exclamation-circle fa-2x"></i> </span></p>
                <p class="title has-text-weight-normal">Are you sure you want to delete the category?</p>
                <p>All the products in this category will also be deleted.</p>
                <div class="mt-4">
                  <!-- delete krne ke liye id pass karega sirf -->
                  <form style="display: inline;" action="/admin/categories/delete" method="post">
                    <input type="hidden" name="deleteid" id="deleteid" value="">
                    <button type="button" class="button is-success mr-4 close_modal">Cancel</button>
                    <button type="submit" class="button is-danger">Delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="container">
            <% const m = getMessages() %>
            <% if(m.error){ %>
              <% m.error.forEach((element) => { %>
                <div class="notification has-text-centered is-danger">
                  <button class="delete"></button>
                  <p class="is-size-5"><%= element %></p>
                </div>
              <% }) %>
            <% } %>
            <% if(m.success){ %>
              <% m.success.forEach((element) => { %>
                <div class="notification has-text-centered is-success">
                  <button class="delete"></button>
                  <p class="is-size-5"><%= element %></p>
                </div>
              <% }) %>
            <% } %>
            <div>
              <p class="title has-text-weight-normal is-flex is-justify-content-space-between">
                <span>Manage Categories</span>
                <button data-target="createmodal" class="modal_trigger button is-link">
                  <span class="icon">
                    <i class="fas fa-plus"></i>
                  </span>
                  <span>Add Category</span>
                </button>
              </p>
              <hr>
            </div>
            <div class="table-container">
              <table class="table is-fullwidth is-striped" id="category_results">
                <!-- categories here -->
                <thead>
                  <tr>
                    <th>Sr No.</th>
                    <th>Name</th>
                    <th>No of Products</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class=" parenttosearch" data-id="">
                    <td>1</td>
                    <td>Category Name</td>
                    <td>40</td>
                    <td>
                      <a href="/admin/categories/edit/1" class="button is-primary mr-2"><span class="icon"><i class="fas fa-pen"></i></span> </a>
                      <button type="button" class="button deletebutton is-danger"><span class="icon"><i class="fas fa-trash"></i></span></button>
                    </td>
                  </tr>
                  <tr class="parenttosearch" data-id="">
                    <td>2</td>
                    <td>Some Name</td>
                    <td>22</td>
                    <td>
                      <a href="/admin/categories/edit/1" class="button is-primary mr-2"><span class="icon"><i class="fas fa-pen"></i></span> </a>
                      <button type="button" class="button deletebutton is-danger"><span class="icon"><i class="fas fa-trash"></i></span></button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </main>
    <%- include('../.././partials/admin-js-links') -%>
    <script src="/js/delete-modal.js" charset="utf-8"></script>
  </body>
</html>
